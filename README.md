# Транслятор Python 2 → Python 3

Курсовая работа по дисциплине "Теория Языков Программирования"

## Описание

Полноценный транслятор, который преобразует код Python 2 в Python 3. Реализован полный цикл компиляции:

1. **Лексический анализ** - разбиение исходного кода на токены
2. **Синтаксический анализ** - построение абстрактного синтаксического дерева (AST)
3. **Таблица идентификаторов** - управление областями видимости
4. **Оптимизация** - свертывание констант, удаление мертвого кода
5. **Генерация кода** - создание Python 3 кода

## Функционал

### Основной интерфейс

- Поле ввода Python 2 кода (слева)
- Поле вывода Python 3 кода (справа)
- Консоль для вывода ошибок и сообщений (внизу справа)
- Селектор примеров для быстрого тестирования
- Кнопка "Анализировать и перевести"

### Вкладка анализа

1. **Синтаксическое дерево** - визуализация AST в текстовом формате
2. **Таблица лексем** - полный список токенов с цветовым оформлением:
   - Ключевые слова (голубой)
   - Идентификаторы (зеленый)
   - Числа (оранжевый)
   - Строки (розовый)
   - Ошибки (красный)
3. **Таблица идентификаторов** - с указанием области видимости, типа, адреса в хеш-таблице

## Обработка ошибок

Программа **находит и подробно описывает** следующие типы ошибок:

### Лексические ошибки

- Неизвестные символы
- Некорректные идентификаторы (начинающиеся с цифры)
- Незакрытые строки
- Некорректные числа
- Ошибки отступов

### Синтаксические ошибки

- Отсутствие ожидаемых токенов (двоеточия, скобки, и т.д.)
- Некорректная структура конструкций
- Неправильная вложенность

Каждая ошибка содержит:
- Номер строки и столбца
- Описание проблемы
- Подсказки по исправлению

## Поддерживаемые конструкции Python 2

### Основное

- ✅ `print` статемент → `print()` функция
- ✅ Функции (`def`)
- ✅ Классы (`class`)
- ✅ Условные операторы (`if/elif/else`)
- ✅ Циклы (`for`, `while`)
- ✅ Вложенные циклы и условия
- ✅ Операторы `return`, `break`, `continue`, `pass`

### Выражения

- ✅ Арифметические операции (`+`, `-`, `*`, `/`, `//`, `%`, `**`)
- ✅ Сравнения (`==`, `!=`, `<`, `<=`, `>`, `>=`)
- ✅ Логические операторы (`and`, `or`, `not`)
- ✅ Вызовы функций
- ✅ Присваивания

### Типы данных

- ✅ Числа (целые, дробные, экспоненциальные)
- ✅ Строки (одинарные и двойные кавычки, тройные кавычки)
- ✅ Списки и кортежи
- ✅ Логические значения (`True`, `False`, `None`)

## Структура проекта

```
CourseWork/
│
├── lexer/                  # Лексический анализатор
│   ├── __init__.py
│   ├── tokens.py          # Определения токенов
│   └── lexer.py           # Лексер с обработкой отступов
│
├── parser/                 # Синтаксический анализатор
│   ├── __init__.py
│   ├── ast_nodes.py       # Узлы AST
│   └── parser.py          # Парсер с поддержкой Python
│
├── identifier_table/      # Таблица идентификаторов
│   ├── __init__.py
│   └── id_table.py        # Хеш-таблица с областями видимости
│
├── optimizer/              # Оптимизатор
│   ├── __init__.py
│   └── optimizer.py       # Свертывание констант, удаление мертвого кода
│
├── code_generator/        # Генератор кода
│   ├── __init__.py
│   └── generator.py       # Генерация Python 3 кода
│
├── examples/               # Примеры для тестирования
│   ├── __init__.py
│   └── examples.py        # 12 примеров Python 2 кода
│
├── main.py                 # Главный GUI файл
└── README.md               # Этот файл
```

## Установка и запуск

### Требования

- Python 3.8+
- tkinter (обычно входит в стандартную поставку Python)

### Запуск

```bash
# Клонирование репозитория
git clone https://github.com/Stanlycore/CourseWork.git
cd CourseWork

# Запуск приложения
python main.py
```

## Примеры использования

### Пример 1: Print статемент

**Вход (Python 2):**
```python
print "Hello, World!"
print "The answer is", 42
```

**Выход (Python 3):**
```python
print("Hello, World!")
print("The answer is", 42)
```

### Пример 2: Функция с циклом

**Вход (Python 2):**
```python
def greet(name):
    print "Hello,", name

for i in range(5):
    greet("User")
```

**Выход (Python 3):**
```python
def greet(name):
    print("Hello,", name)

for i in range(5):
    greet("User")
```

## Особенности реализации

### Лексер

- Полная поддержка отступов Python (INDENT/DEDENT токены)
- Распознавание всех типов чисел (int, float, hex, octal, binary, экспоненциальные)
- Поддержка тройных кавычек и escape-последовательностей

### Парсер

- Рекурсивный спуск с приоритетом операторов
- Полная поддержка вложенных конструкций
- Подробные сообщения об ошибках с номерами строк и столбцов

### Таблица идентификаторов

- Хеш-таблица с цепочками
- Автоматическое увеличение размера
- Поддержка вложенных областей видимости
- Статистика (коллизии, пробы, коэффициент загрузки)

### Оптимизатор

- **Свертывание констант**: `2 + 3` → `5`
- **Удаление мертвого кода**: `if False: ...` → удаляется

## Дизайн интерфейса

Дизайн приближен к стилю лабораторных работ:

- Двухпанельный интерфейс
- Цветовая подсветка токенов
- Цветовое различение областей видимости
- Раздельные вкладки для анализа
- Консоль с цветными сообщениями

## Автор

Курсовая работа по дисциплине "Теория Языков Программирования" (TYaP)

## Лицензия

MIT License
